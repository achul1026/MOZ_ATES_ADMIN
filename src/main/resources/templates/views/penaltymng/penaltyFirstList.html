<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<th:block layout:fragment="content">
	<div id="container-fluid">
		<!-- Page Heading -->
		<h1 id="content-title" th:text="#{penalty.penalty.title}">전체 납부 대상자</h1>
		<div id="content-sub-title" th:text="#{penalty.penaltyList.desc}">전체 납부 대상자를 관리할 수 있습니다</div>

		<form id="frmSearch">
			<input type="hidden" id="page" name="page" th:value="${pagination.page}">
			<input type="hidden" id="hdnStart" name="start" th:value="${finePymntInfo.start}">
			<div class="">
				<table id="filter-table">
					<colgroup>
						<col width="15%">
						<col width="85%">
					</colgroup>
					<tbody>
						<tr>
							<th th:text="#{penalty.common.type}">유형 선택</th>
							<td>
								<select name="searchType" class="filter-select" id="searchType" th:field="${finePymntInfo.searchType}">
									<option value="all" th:text="#{penalty.common.allCon}">전체</option>
									<option value="tfcEnfId" th:text="#{penalty.penalty.trafficEnforcementNumber}">단속 번호</option>
									<option value="vioDrvLcenId" th:text="#{penalty.penalty.driverLicenseId}">단속 번호</option>
									<option value="vioNm" th:text="#{penalty.penalty.vioNm}">대상자</option>
								</select>
							</td>
						</tr>
						<tr>
							<th th:text="#{penalty.penalty.tfcEnfDate}">날짜 선택</th>
							<td>
<!--								<select name="dateSearchType" class="filter-select" id="dateSearchType" th:field="${finePymntInfo.dateSearchType}">-->
<!--									<option value="all" th:text="#{penalty.common.allCon}">전체</option>-->
<!--									<option value="ntcDt" th:text="#{penalty.penaltyList.noticeDate}">고지일자</option>-->
<!--									<option value="dueDt" th:text="#{penalty.penaltyList.paymentDueDate}">납부기한</option>-->
<!--								</select>-->
								<input class="input-date" id="sDate" name="sDate" type="date" th:value="${finePymntInfo.sDate}"> ~
								<input class="input-date" id="eDate" name="eDate" type="date" th:value="${finePymntInfo.eDate}">
							</td>
						</tr>
						<tr>
							<th th:text="#{penalty.common.search}">내용 검색</th>
							<td><input class="search-box main-input" id="searchTxt" name="searchTxt" type="text" 
								th:placeholder="#{penalty.common.search.placeholder}" th:value="${finePymntInfo.searchTxt}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</form>

		<div class="btn-wrap-center">
			<button type="button" id="btnSearch" class="main-btn form-button" th:text="#{finentc.mngList.check}">조회</button>
			<!-- TODO 검색초기화 -->
			<button type="button" id="resetSearch" class="sub-btn form-button" onclick="resetForm('frmSearch')" th:text="#{penalty.common.search.reset}">검색 초기화</button>
		</div>

		<div id="search-form-result-wrap">
			<div id="table-search-result-text">
				Found <span th:text='|"${pagination.totalListCnt}"|'></span> results
			</div>
			<div id="table-regist-btn">

			</div>
		</div>

		<div class="">
			<table class="main-table" id="tblList">
				<thead>
					<tr>
						<th th:text="#{penalty.common.number}">번호</th>
						<th th:text="#{penalty.penalty.condition}"></th>
						<th th:text="#{penalty.penalty.trafficEnforcementNumber}" tabindex="0">단속 번호</th>
						<th th:text="#{penalty.penalty.driverLicenseId}">
<!--							<select class="th-select">-->
<!--								<option th:text="#{penalty.penalty.penaltyName}">유형</option>-->
<!--								<option th:text="#{penalty.penaltyList.selectAll}">전체</option>-->
<!--								<option th:text="#{penalty.penaltyList.vioType.signalVio}">신호위반</option>-->
<!--								<option th:text="#{penalty.penaltyList.vioType.drinking}">음주</option>-->
<!--								<option th:text="#{penalty.penaltyList.vioType.speeding}">과속</option>-->
<!--							</select>-->
						</th>
						<th th:text="#{penalty.penalty.vioNm}">대상자</th>
						<th th:text="#{penalty.penalty.enrollment}">고지일자</th>
						<th th:text="#{penalty.penalty.manage}">담당자</th>
						<th th:text="#{penalty.penalty.price}">납부금액</th>
						<th th:text="#{penalty.penalty.endDay}">납부기한</th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="penaltyItem : ${penaltyList}"
						th:onclick="|location.href='@{/penalty/first/detail.do(pymntId=${penaltyItem.pymntId})}'|">
						<td th:text="${penaltyItem.rnum}"></td>
						<td th:text="${penaltyItem.pymntStts eq 'Y' ? 'Paid' : 'Not Paid'}"></td>
						<td th:text="${penaltyItem.tfcEnfMaster.tfcEnfId}"></td>
<!--						<td th:text="${penaltyItem.cmCd.cdNm}"></td>-->
						<td th:text="${penaltyItem.vioInfo.dvrLcenId}"></td>
						<td th:text="${penaltyItem.vioInfo != null ? penaltyItem.vioInfo.vioNm : '-'}"></td>
						<td th:text="${penaltyItem.tfcEnfMaster.tfcEnfDt != null ? #dates.format(penaltyItem.tfcEnfMaster.tfcEnfDt, 'yyyy-MM-dd HH:mm:ss') : '-'}"></td>
						<td th:text="${penaltyItem.polInfo?.polNm}"></td>
						<td th:text="${penaltyItem.totalPrice> 0 && penaltyItem.totalPrice != null ? @mozatesCommonUtils.priceFmt(penaltyItem.totalPrice,'MOZAMBIQUE_METICAL') : '0'}"></td>
						<td th:text="${#dates.format(penaltyItem.fineNtcInfo.firstFineNtcDdln, 'yyyy-MM-dd')}">2024.03.01</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="page_wrap">
			<div th:insert="tags/paging :: pagingFragment"></div>
		</div>
	</div>


</th:block>

</html>
<script th:inline="javascript">
	function fnPageMove(page) {
		$("#page").val(page);
		$("#frmSearch").submit();
	}
	
	$("#btnSearch").on('click', function(){
		$("#frmSearch").submit();		
	})
</script>
