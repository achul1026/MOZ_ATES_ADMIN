<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<th:block layout:fragment="content">
	<div id="container-fluid">
		<!-- Page Heading -->
		<h1 id="content-title" th:text="#{equipment.mngList.title}">전체 단속장비 수</h1>
		<div id="content-sub-title" th:text="#{equipment.mngList.descr}">단속장비를 관리할 수 있습니다.</div>

		<div class="btn-wrap-left tab-btn-wrap">
			<button type="button" class="main-btn form-button" id="mapBtn" th:text="#{equipment.mngList.mapBtn}">지도 확인</button>
			<button type="button" class="sub-btn form-button" id="listBtn" th:text="#{equipment.mngList.listBtn}">단속장비관리</button>
		</div>
		
		<div id="ajaxContent"></div>

	</div>
</th:block>

</html>
<script th:inline="javascript">
	var listBtn = $("#listBtn");
	var mapBtn = $("#mapBtn");
	var ajaxContent = $("#ajaxContent");
	
	$(function(){
		var pageType = /*[[${pageType}]]*/;
		if(pageType == "list"){
			ajaxContent.text('');
			mapBtn.removeClass('main-btn');
			mapBtn.addClass('sub-btn');
			listBtn.removeClass('sub-btn');
			listBtn.addClass('main-btn');
			getListAjax();
		}else{
			getMapAjax();
		}
	})
	
	listBtn.click(function() {
		ajaxContent.text('');
		mapBtn.removeClass('main-btn');
		mapBtn.addClass('sub-btn');
		listBtn.removeClass('sub-btn');
		listBtn.addClass('main-btn');
		getListAjax();
	})
	
	mapBtn.click(function() {
		ajaxContent.text('');
		mapBtn.removeClass('sub-btn');
		mapBtn.addClass('main-btn');
		listBtn.removeClass('main-btn');
		listBtn.addClass('sub-btn');
		getMapAjax();
	})
	
	function getMapAjax() {
		$.ajax({
			url: /*[[@{/eqp/mng/eqpMngMapAjax}]]*/ '/eqp/mng/eqpMngMapAjax',
			// url: "/eqp/eqpMngMapAjax",
			type: "POST",
			data: $("#frmSearch").serialize(),
			dataType: 'html',
			cache: false,
			success: function (data) {
				ajaxContent.html(data);
			}
		});
	}
	
	function getListAjax() {
		$.ajax({
			url: /*[[@{/eqp/mng/eqpMngListAjax}]]*/ '/eqp/mng/eqpMngListAjax',
			// url: "/eqp/eqpMngListAjax",
			type: "POST",
			data: $("#frmSearch").serialize(),
			dataType: 'html',
			cache: false,
			success: function (data) {
				ajaxContent.html(data);
			}
		});
	}
</script>